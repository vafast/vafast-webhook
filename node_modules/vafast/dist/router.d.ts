import { Route, NestedRoute, FlattenedRoute } from './types/types.js';

/**
 * 路由工具函数
 *
 * 提供路由处理的基础工具
 */

/**
 * 扁平化嵌套路由
 *
 * 将嵌套路由结构转换为扁平数组，计算完整路径和中间件链
 *
 * @example
 * ```typescript
 * const routes = flattenNestedRoutes([
 *   {
 *     path: "/api",
 *     middleware: [authMiddleware],
 *     children: [
 *       { path: "/users", method: "GET", handler: getUsers },
 *       { path: "/users/:id", method: "GET", handler: getUser },
 *     ],
 *   },
 * ]);
 * // 结果:
 * // [
 * //   { fullPath: "/api/users", method: "GET", ... },
 * //   { fullPath: "/api/users/:id", method: "GET", ... },
 * // ]
 * ```
 */
declare function flattenNestedRoutes(routes: (Route | NestedRoute)[]): FlattenedRoute[];
/**
 * 标准化路径
 *
 * - 解码 URL 编码字符
 * - 去除重复斜杠
 * - 处理结尾斜杠
 *
 * @example
 * ```typescript
 * normalizePath("//api//users/")  // "/api/users"
 * normalizePath("/api/%20test")   // "/api/ test"
 * ```
 */
declare function normalizePath(path: string): string;

export { flattenNestedRoutes, normalizePath };
