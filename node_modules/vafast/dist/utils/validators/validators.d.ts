import { TSchema, Static } from '@sinclair/typebox';
export { Static, TSchema, Type } from '@sinclair/typebox';

/**
 * Schema 验证器 - 简洁版
 *
 * 特点：
 * - WeakMap 缓存避免内存泄漏
 * - TypeCompiler JIT 编译，性能最佳
 * - 支持 FormatRegistry（需确保同一实例）
 *
 * @version 7.0.0
 */

/** Schema 配置接口 */
interface SchemaConfig {
    body?: TSchema;
    query?: TSchema;
    params?: TSchema;
    headers?: TSchema;
    cookies?: TSchema;
}
/** 验证错误接口 */
interface ValidationError {
    path: string;
    message: string;
    code: string;
    value?: unknown;
}
/** 验证结果 */
type ValidationResult<T = unknown> = {
    success: true;
    data: T;
} | {
    success: false;
    errors: ValidationError[];
};
/**
 * 验证单个 Schema（返回结果对象）
 */
declare function validateSchema<T extends TSchema>(schema: T, data: unknown): ValidationResult<Static<T>>;
/**
 * 验证 Schema（抛出异常版本，用于框架内部）
 */
declare function validateSchemaOrThrow<T extends TSchema>(schema: T, data: unknown, context: string): Static<T>;
/**
 * 快速验证（只返回布尔值）
 */
declare function validateFast<T extends TSchema>(schema: T, data: unknown): data is Static<T>;
/**
 * 批量验证所有 Schema（用于请求验证）
 */
declare function validateAllSchemas(config: SchemaConfig, data: {
    body: unknown;
    query: unknown;
    params: unknown;
    headers: unknown;
    cookies: unknown;
}): typeof data;
/**
 * 预编译 Schema（启动时调用，避免首次请求开销）
 */
declare function precompileSchemas(config: SchemaConfig): void;
/**
 * 创建类型特化的验证器（高频使用场景）
 */
declare function createValidator<T extends TSchema>(schema: T): (data: unknown) => ValidationResult<Static<T>>;
/**
 * 获取缓存统计（调试用）
 */
declare function getValidatorCacheStats(): {
    cacheType: string;
    note: string;
};

export { type SchemaConfig, type ValidationError, type ValidationResult, createValidator, getValidatorCacheStats, precompileSchemas, validateAllSchemas, validateFast, validateSchema, validateSchemaOrThrow };
