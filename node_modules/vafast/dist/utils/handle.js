// src/utils/parsers.ts
import qs from "qs";
import cookie from "cookie";
function parseCookies(req) {
  const cookieHeader = req.headers.get("cookie");
  if (!cookieHeader) return {};
  try {
    const parsed = cookie.parse(cookieHeader);
    const result = {};
    for (const [key, value] of Object.entries(parsed)) {
      if (value !== void 0 && value !== null) {
        result[key] = value;
      }
    }
    return result;
  } catch {
    return {};
  }
}

// src/utils/handle.ts
function getCookie(req, key) {
  const cookies = parseCookies(req);
  return cookies[key] || null;
}
function setCookie(key, value, options = {}) {
  let cookie2 = `${key}=${encodeURIComponent(value)}`;
  if (options.path) cookie2 += `; Path=${options.path}`;
  if (options.httpOnly) cookie2 += `; HttpOnly`;
  if (options.secure) cookie2 += `; Secure`;
  if (options.maxAge) cookie2 += `; Max-Age=${options.maxAge}`;
  return cookie2;
}
function setLocals(req, extras) {
  const target = req;
  target.__locals = { ...target.__locals ?? {}, ...extras };
}
function getLocals(req) {
  const target = req;
  return target.__locals ?? {};
}
export {
  getCookie,
  getLocals,
  setCookie,
  setLocals
};
//# sourceMappingURL=handle.js.map