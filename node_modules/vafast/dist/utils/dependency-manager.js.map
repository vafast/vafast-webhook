{"version":3,"sources":["../../src/utils/dependency-manager.ts"],"sourcesContent":["/**\n * ä¾èµ–ç®¡ç†å™¨\n * è´Ÿè´£æŒ‰éœ€åŠ è½½å’Œç®¡ç†æ¡†æ¶ä¾èµ–\n */\nexport class DependencyManager {\n  private dependencyCache = new Map<string, any>();\n\n  /**\n   * æŒ‰éœ€è·å–æ¡†æ¶ä¾èµ–\n   */\n  async getFrameworkDeps(framework: \"vue\" | \"react\") {\n    if (this.dependencyCache.has(framework)) {\n      return this.dependencyCache.get(framework);\n    }\n\n    console.log(`ğŸ“¦ æŒ‰éœ€åŠ è½½ ${framework} ä¾èµ–...`);\n\n    try {\n      let deps;\n      switch (framework) {\n        case \"vue\":\n          deps = await Promise.all([\n            import(\"vue\"),\n            import(\"@vue/server-renderer\"),\n          ]);\n          break;\n        case \"react\":\n          deps = await Promise.all([\n            import(\"react\"),\n            import(\"react-dom/server\"),\n          ]);\n          break;\n        default:\n          throw new Error(`ä¸æ”¯æŒçš„æ¡†æ¶: ${framework}`);\n      }\n\n      this.dependencyCache.set(framework, deps);\n      console.log(`âœ… ${framework} ä¾èµ–åŠ è½½å®Œæˆ`);\n      return deps;\n    } catch (error) {\n      console.error(`âŒ ${framework} ä¾èµ–åŠ è½½å¤±è´¥:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * æ£€æµ‹ç»„ä»¶ç±»å‹\n   */\n  detectComponentType(component: any): \"vue\" | \"react\" {\n    // ç®€å•çš„ç»„ä»¶ç±»å‹æ£€æµ‹\n    if (component.render && typeof component.render === \"function\") {\n      return \"vue\";\n    }\n    if (component.$$typeof) {\n      return \"react\";\n    }\n    // é»˜è®¤ä½¿ç”¨ Vue\n    return \"vue\";\n  }\n\n  /**\n   * æ¸…é™¤ç¼“å­˜\n   */\n  clearCache(): void {\n    this.dependencyCache.clear();\n    console.log(\"ğŸ§¹ ä¾èµ–ç¼“å­˜å·²æ¸…é™¤\");\n  }\n\n  /**\n   * è·å–ç¼“å­˜çŠ¶æ€\n   */\n  getCacheStatus(): Record<string, boolean> {\n    const status: Record<string, boolean> = {};\n    for (const [framework] of this.dependencyCache) {\n      status[framework] = true;\n    }\n    return status;\n  }\n}\n"],"mappings":";AAIO,IAAM,oBAAN,MAAwB;AAAA,EACrB,kBAAkB,oBAAI,IAAiB;AAAA;AAAA;AAAA;AAAA,EAK/C,MAAM,iBAAiB,WAA4B;AACjD,QAAI,KAAK,gBAAgB,IAAI,SAAS,GAAG;AACvC,aAAO,KAAK,gBAAgB,IAAI,SAAS;AAAA,IAC3C;AAEA,YAAQ,IAAI,sCAAW,SAAS,kBAAQ;AAExC,QAAI;AACF,UAAI;AACJ,cAAQ,WAAW;AAAA,QACjB,KAAK;AACH,iBAAO,MAAM,QAAQ,IAAI;AAAA,YACvB,OAAO,KAAK;AAAA,YACZ,OAAO,sBAAsB;AAAA,UAC/B,CAAC;AACD;AAAA,QACF,KAAK;AACH,iBAAO,MAAM,QAAQ,IAAI;AAAA,YACvB,OAAO,OAAO;AAAA,YACd,OAAO,kBAAkB;AAAA,UAC3B,CAAC;AACD;AAAA,QACF;AACE,gBAAM,IAAI,MAAM,yCAAW,SAAS,EAAE;AAAA,MAC1C;AAEA,WAAK,gBAAgB,IAAI,WAAW,IAAI;AACxC,cAAQ,IAAI,UAAK,SAAS,uCAAS;AACnC,aAAO;AAAA,IACT,SAAS,OAAO;AACd,cAAQ,MAAM,UAAK,SAAS,0CAAY,KAAK;AAC7C,YAAM;AAAA,IACR;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKA,oBAAoB,WAAiC;AAEnD,QAAI,UAAU,UAAU,OAAO,UAAU,WAAW,YAAY;AAC9D,aAAO;AAAA,IACT;AACA,QAAI,UAAU,UAAU;AACtB,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,aAAmB;AACjB,SAAK,gBAAgB,MAAM;AAC3B,YAAQ,IAAI,sDAAY;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA,EAKA,iBAA0C;AACxC,UAAM,SAAkC,CAAC;AACzC,eAAW,CAAC,SAAS,KAAK,KAAK,iBAAiB;AAC9C,aAAO,SAAS,IAAI;AAAA,IACtB;AACA,WAAO;AAAA,EACT;AACF;","names":[]}