{"version":3,"sources":["../../src/types/route.ts"],"sourcesContent":["import { Route, ResponseBody } from \"./types\";\n\n// 定义中间件类型\nexport interface Middleware {\n  (req: Request, next: () => Promise<Response>): Promise<Response>;\n}\n\n// 基础路由配置\nexport interface BaseRouteConfig {\n  method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" | \"PATCH\" | \"OPTIONS\" | \"HEAD\";\n  path: string;\n  handler: (req: Request) => ResponseBody | Promise<ResponseBody>;\n}\n\n// 扩展的路由配置 - 只保留Schema验证和中间件\nexport interface ExtendedRouteConfig extends BaseRouteConfig {\n  // Tirne 中间件系统\n  middleware?: Middleware[];\n\n  // Schema验证配置\n  body?: any;\n  query?: any;\n  params?: any;\n  headers?: any;\n  cookies?: any;\n\n  // 其他配置\n  docs?: {\n    description?: string;\n    tags?: string[];\n    security?: any[];\n    responses?: Record<string, any>;\n  };\n  timeout?: number;\n  maxBodySize?: string;\n\n  // 允许任意扩展\n  [key: string]: any;\n}\n\n// 嵌套路由配置\nexport interface NestedRouteConfig {\n  path: string;\n  middleware?: Middleware[];\n  children?: (NestedRouteConfig | ExtendedRouteConfig)[];\n}\n\n// 类型安全的路由\nexport type TypedRoute = ExtendedRouteConfig;\n\n// 兼容类型：可以接受Route或TypedRoute\nexport type CompatibleRoute = Route | TypedRoute;\n\n// 扁平化后的路由，包含完整的中间件链\nexport interface FlattenedRoute extends ExtendedRouteConfig {\n  fullPath: string;\n  middlewareChain: Middleware[];\n}\n\n// 导出一些实际的函数，确保 JavaScript 代码生成\nexport function createTypedRoute(\n  config: ExtendedRouteConfig,\n): ExtendedRouteConfig {\n  return config;\n}\n\nexport function isTypedRoute(route: any): route is TypedRoute {\n  return (\n    route &&\n    typeof route === \"object\" &&\n    \"method\" in route &&\n    \"path\" in route &&\n    \"handler\" in route\n  );\n}\n"],"mappings":";AA4DO,SAAS,iBACd,QACqB;AACrB,SAAO;AACT;AAEO,SAAS,aAAa,OAAiC;AAC5D,SACE,SACA,OAAO,UAAU,YACjB,YAAY,SACZ,UAAU,SACV,aAAa;AAEjB;","names":[]}